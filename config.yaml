# config.yaml

# General experiment settings
experiment_name: "pytorch_training"
job_id: "job_12345"
script_path: "exp/"
script_class_name: "TrainingScript"
num_jobs_per_node: 1

# Device configuration
on_cuda: true
python_path: "$HOME/conda/envs/pytorch-py3.6/bin/python"
hostfile: "hostfile"
world_conf: "0,0,1,1,100"

# Model settings
arch: "resnet20"
complex_arch: "master=resnet20,worker=resnet8:resnet14"
densenet_growth_rate: 12
densenet_bc_mode: false
wideresnet_widen_factor: 4

# Training parameters
batch_size: 256
learning_rate: 0.01
lr_scheduler: "MultiStepLR"
lr_milestones: "30,60,90"
lr_decay: 0.1
lr_patience: 10
early_stopping_rounds: 5
n_epochs: 100

# Optimizer settings
optimizer: "sgd"
momentum_factor: 0.9
use_nesterov: false
weight_decay: 5e-4

# Federated Learning settings
n_clients: 10
participation_ratio: 0.1
fl_aggregate: "avg"

# Relation Attention Mechanism settings
relation_attention:
  enabled: true  # 是否启用关系注意力机制
  alpha: 0.5     # 关系注意力分数与用户-关系得分的混合权重
  attention_type: "mlp"  # "linear" 或 "mlp"
  mlp_hidden_dim: null   # 如果使用 MLP，隐藏层维度（默认 dim/2）

# Relation Adaptive Aggregation settings
relation_adaptive_aggregation:
  enabled: true           # 是否启用关系自适应聚合
  similarity_method: "kl_divergence"  # "kl_divergence" 或 "cosine"
  temperature: 1.0        # softmax 温度参数（用于权重计算）

# Relation Statistics settings
relation_statistics:
  track_during_training: true  # 是否在训练过程中跟踪关系使用情况
  update_frequency: 1          # 更新频率（每 N 个 batch 更新一次）

# Data settings
train_data_path: "./data/train"
test_data_path: "./data/test"
use_mixup: false
mixup_alpha: 1.0

# Checkpoint settings
checkpoint_path: "./checkpoints"
checkpoint_index: null
save_all_models: true
save_some_models: "10,20,30"

# Miscellaneous settings
manual_seed: 42
evaluate: false
track_time: true
summary_freq: 256
