# æ•°æ®é›†å‡†å¤‡æŒ‡å—

## ğŸ“Š éœ€è¦çš„æ•°æ®é›†

é¡¹ç›®æ”¯æŒä¸‰ä¸ªæ•°æ®é›†ï¼š**Music (Last.fm)**, **Book (Book-Crossing)**, **Movie (MovieLens-20M)**

## ğŸ“ æ•°æ®é›†ç›®å½•ç»“æ„

æ¯ä¸ªæ•°æ®é›†éœ€è¦æ”¾åœ¨å¯¹åº”çš„ç›®å½•ä¸‹ï¼š

### 1. Music æ•°æ®é›† (Last.fm)
```
data/music/
â”œâ”€â”€ item_index2entity_id.txt      # ç‰©å“IDåˆ°å®ä½“IDçš„æ˜ å°„
â”œâ”€â”€ kg_final.txt                  # çŸ¥è¯†å›¾è°±ä¸‰å…ƒç»„
â””â”€â”€ ratings_final.txt             # ç”¨æˆ·è¯„åˆ†æ•°æ®
```

**æ–‡ä»¶æ ¼å¼**ï¼š
- `item_index2entity_id.txt`: `item_id\tentity_id`
- `kg_final.txt`: `head_entity\trelation\ttail_entity`
- `ratings_final.txt`: `user_id\titem_id\trating` (åˆ†éš”ç¬¦: `\t`)

---

### 2. Book æ•°æ®é›† (Book-Crossing)
```
data/book/
â”œâ”€â”€ item_index2entity_id_rehashed.txt  # ç‰©å“IDåˆ°å®ä½“IDçš„æ˜ å°„
â”œâ”€â”€ kg_rehashed.txt                     # çŸ¥è¯†å›¾è°±ä¸‰å…ƒç»„
â””â”€â”€ BX-Book-Ratings.csv                 # ç”¨æˆ·è¯„åˆ†æ•°æ®
```

**æ–‡ä»¶æ ¼å¼**ï¼š
- `item_index2entity_id_rehashed.txt`: `item_id\tentity_id`
- `kg_rehashed.txt`: `head_entity\trelation\ttail_entity`
- `BX-Book-Ratings.csv`: `user_id;item_id;rating` (åˆ†éš”ç¬¦: `;`)

---

### 3. Movie æ•°æ®é›† (MovieLens-20M)
```
data/movie/
â”œâ”€â”€ item_index2entity_id.txt      # ç‰©å“IDåˆ°å®ä½“IDçš„æ˜ å°„
â”œâ”€â”€ kg_final.txt                  # çŸ¥è¯†å›¾è°±ä¸‰å…ƒç»„
â””â”€â”€ ratings_final.txt             # ç”¨æˆ·è¯„åˆ†æ•°æ®
```

**æ–‡ä»¶æ ¼å¼**ï¼š
- `item_index2entity_id.txt`: `item_id\tentity_id`
- `kg_final.txt`: `head_entity\trelation\ttail_entity`
- `ratings_final.txt`: `user_id,item_id,rating` (åˆ†éš”ç¬¦: `,`)

---

## ğŸ” æ•°æ®é›†æ¥æº

### 1. Last.fm (Music)
- **æ¥æº**: [Last.fm Dataset](http://www.last.fm/api)
- **çŸ¥è¯†å›¾è°±**: å¯ä»¥ä» [Freebase](https://developers.google.com/freebase) æˆ– [DBpedia](https://www.dbpedia.org/) è·å–

### 2. Book-Crossing
- **æ¥æº**: [Book-Crossing Dataset](http://www2.informatik.uni-freiburg.de/~cziegler/BX/)
- **çŸ¥è¯†å›¾è°±**: ä» Amazon Book æˆ– Freebase è·å–

### 3. MovieLens-20M
- **æ¥æº**: [MovieLens 20M Dataset](https://grouplens.org/datasets/movielens/20m/)
- **çŸ¥è¯†å›¾è°±**: ä» [TMDB](https://www.themoviedb.org/) æˆ– [IMDb](https://www.imdb.com/) è·å–

---

## ğŸ› ï¸ æ•°æ®é¢„å¤„ç†

é¡¹ç›®ä¼šè‡ªåŠ¨è¿›è¡Œæ•°æ®é¢„å¤„ç†ï¼š
- å°†åŸå§‹æ•°æ®è½¬æ¢ä¸º PyTorch å¼ é‡
- æ„å»ºçŸ¥è¯†å›¾è°±é‚»æ¥è¡¨
- åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼ˆé»˜è®¤ 8:2ï¼‰
- ä¿å­˜ä¸º `preprocessed_data` æ–‡ä»¶

**é¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œé¢„å¤„ç†ï¼Œä¹‹åä¼šç›´æ¥åŠ è½½é¢„å¤„ç†å¥½çš„æ•°æ®ã€‚**

---

## ğŸ“ ç¤ºä¾‹ï¼šåˆ›å»ºæµ‹è¯•æ•°æ®é›†

å¦‚æœä½ åªæ˜¯æƒ³æµ‹è¯•ä»£ç æ˜¯å¦èƒ½è¿è¡Œï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå°å‹çš„æ¨¡æ‹Ÿæ•°æ®é›†ï¼š

### åˆ›å»º Music æµ‹è¯•æ•°æ®
```bash
mkdir -p data/music

# åˆ›å»º item_index2entity_id.txt (10ä¸ªç‰©å“)
echo -e "0\t100\n1\t101\n2\t102\n3\t103\n4\t104\n5\t105\n6\t106\n7\t107\n8\t108\n9\t109" > data/music/item_index2entity_id.txt

# åˆ›å»º kg_final.txt (30ä¸ªä¸‰å…ƒç»„)
echo -e "100\t0\t200\n101\t0\t201\n102\t1\t202\n103\t1\t203\n104\t2\t204\n105\t0\t205\n106\t1\t206\n107\t2\t207\n108\t0\t208\n109\t1\t209" > data/music/kg_final.txt

# åˆ›å»º ratings_final.txt (100æ¡è¯„åˆ†)
for i in {0..99}; do
  user=$((i % 20))
  item=$((i % 10))
  rating=$((RANDOM % 2))
  echo -e "$user\t$item\t$rating" >> data/music/ratings_final.txt
done
```

---

## âœ… éªŒè¯æ•°æ®é›†

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯æ•°æ®é›†æ˜¯å¦æ­£ç¡®ï¼š

```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -lh data/music/

# æŸ¥çœ‹æ–‡ä»¶å‰å‡ è¡Œ
head -5 data/music/item_index2entity_id.txt
head -5 data/music/kg_final.txt
head -5 data/music/ratings_final.txt
```

---

## ğŸš€ è¿è¡Œé¡¹ç›®

æ•°æ®é›†å‡†å¤‡å¥½åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œï¼š

```bash
# Music æ•°æ®é›†
python run.py --arch kgcn --complex_arch master=kgcn_kg,worker=kgcn_aggregate \
  --experiment serial --data music --batch_size 32 --n_clients 10 \
  --n_comm_rounds 100 --local_n_epochs 1 --on_cuda True

# Book æ•°æ®é›†
python run.py --arch kgcn --complex_arch master=kgcn_kg,worker=kgcn_aggregate \
  --experiment serial --data book --batch_size 32 --n_clients 10 \
  --n_comm_rounds 100 --local_n_epochs 1 --on_cuda True

# Movie æ•°æ®é›†
python run.py --arch kgcn --complex_arch master=kgcn_kg,worker=kgcn_aggregate \
  --experiment serial --data movie --batch_size 32 --n_clients 10 \
  --n_comm_rounds 100 --local_n_epochs 1 --on_cuda True
```

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

1. **æ•°æ®é›†å¤§å°**: 
   - Music/Book: é€‚åˆå°è§„æ¨¡å®éªŒï¼ˆå®¢æˆ·ç«¯æ•° < 2000ï¼‰
   - Movie: å¤§è§„æ¨¡æ•°æ®é›†ï¼ˆå®¢æˆ·ç«¯æ•° > 100,000ï¼‰

2. **å†…å­˜éœ€æ±‚**:
   - å°æ•°æ®é›†: 8GB+ RAM
   - å¤§æ•°æ®é›†: 32GB+ RAM

3. **GPUéœ€æ±‚**:
   - æ¨èä½¿ç”¨ NVIDIA GPU (CUDA 11.8+)
   - æœ€å°æ˜¾å­˜: 6GB
   - æ¨èæ˜¾å­˜: 12GB+

4. **é¢„å¤„ç†æ—¶é—´**:
   - é¦–æ¬¡è¿è¡Œä¼šè¿›è¡Œæ•°æ®é¢„å¤„ç†
   - Music/Book: 1-5åˆ†é’Ÿ
   - Movie: 10-30åˆ†é’Ÿ

---

## ğŸ”— ç›¸å…³èµ„æº

- [RippleNet](https://github.com/hwwang55/RippleNet) - ç±»ä¼¼çš„çŸ¥è¯†å›¾è°±æ¨èé¡¹ç›®
- [KGAT](https://github.com/xiangwang1223/knowledge_graph_attention_network) - çŸ¥è¯†å›¾è°±æ³¨æ„åŠ›ç½‘ç»œ
- [FedRKG Paper](https://arxiv.org/abs/xxxx.xxxxx) - åŸè®ºæ–‡

---

**å‡†å¤‡å¥½æ•°æ®é›†åï¼Œå°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†ï¼** ğŸ‰


